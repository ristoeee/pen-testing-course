# h1 Kybertappoketju

## Tehtävässä käytetty tietokone:
* Lenovo T480s
* RAM: 16 GB
* Tallennustila: 500 GB
* OS: Windows 11 Pro
* CPU: Intel i7-8650U (8 core)
  

## x) Tiivistelmä

Valitsin tähän Herrasmieshakkerit podcastin, "Tietoturvan niksipirkka". (https://www.withsecure.com/fi/whats-new/podcasts/herrasmieshakkerit)
* aluksi käsiteltiin pahishakkerin siirtymistä hyvishakkeriksi.
* Vieraana Keskon Tieoturvajohtaja Juha Rikala, joka kertoi ensin omat taustansa sekä keskon konsernista ja brändesitä.
* Suurien tietomäärien käsittely ja suojaaminen. 
* Keskon IT-osastolla yli 300 työntekijää, keskitetty tietoturvatiimi.
* Tietoturvan haasteet Keskon käyttämien palveluntarjoajien kanssa.
* Tietoturvaa kehitetään riskilähtöisesti, priorisoidaan riskien riskitason perusteella
* Kuluttajien datan keruu käyttäjän luvalla ja kulutustottumukset, tietojen säilytys hajautettu ja pääsy vain hyvin rajatulla määrällä henkilöstöä.
* Asiakastietojen lisäksi myös mittarointitietoa keskon kiinteistöistä
* EU:n regulaation vaikutus Keskolla, vaatimukset kasvavat jatkuvasti. Viimeisimpänä NIS2 ja sen vaikutukset ovat selvityksen alla
  

## a) Kali asennus

Käytän Kalin asennukseen virtuaalikonetta ja virtuaalikoneiden hallintaan VirtualBoxia (Versio Version 7.0.22 r165102). Kalin asennus imagen latasin suoraan kali.org sivustolta.
Alla olevasta kuvasta näkyy virtuaalikoneelle valitsemani speksit:

![image](https://github.com/user-attachments/assets/b9e479d2-b958-4e0d-89fd-ef8ff5180610)


Kalin asennus käynnissä:

![image](https://github.com/user-attachments/assets/3566b61b-6e3a-4d36-9efc-8400a0c89ecb)


Kali asennettuna:

![image](https://github.com/user-attachments/assets/f44390c2-53fc-4130-96c6-a8eb13429f8b)


## b) Kalin irrotus netistä

Poistin Kalin verkkokortin pois käytöstä tehtävää varten:

![image](https://github.com/user-attachments/assets/4336fbda-d58e-4546-92e7-a27e3415ac6f)


## c) Porttiscannaus

Seuraavaksi oli vuorossa porttiscannaus paikallisesti komenolla `nmap -T4 -A localhost`. Nmap on siis työkalu, jolla porttiscannaus tehdään, -T4 parametri on tracerout, joka nopeuttaa scannausta, -A taas tunnistaa käyttöjärjestelmän ja version. (Nmap manuaali Kalissa komennolla `man nmap`).

![image](https://github.com/user-attachments/assets/4021fa89-3f23-4774-9d2b-4f561c717ec9)

Koska kyseessä on tuore asennus, eikä virtuaalikoneessa ole mitään demoneja asennettuna/aktiivisena, ei myöskään löydy porttiscannauksella mitään. Scannaus tuloksesta minulla kuitenkin heräsi epäilys, että ovatkohan kaikki ajantasalla, koska olettaisin, että edes käyttöjärjestelmän voisi tunnistaa. Tästä syystä ajoin komennot `sudo apt-get update` ja `sudo apt-get upgrade`

![image](https://github.com/user-attachments/assets/98f98662-3c04-431b-90ab-5a5d9f8e2104)

Päivityksie jälkeen sain kuitenkin saman tuloksen uudella scannauksella. Pikainen googletus ei tuottanut mitään järkevää tulosta, joten kyselin vielä tekoälyltä (chatGPT) seuraavilla propteilla: "Kali linux in virtualbox. Namp tool and understanding the results:" (lisäksi liitin scannauksen tulokset) sekä tämän jälkeen tarkensin kysymällä "Mistä voisi johtua tuo "too many fingerprints match this host""

![image](https://github.com/user-attachments/assets/edac0bcc-9100-4176-9132-35c3efd23808)

Tässä vaiheessa tyydyn tuohon ensimmäiseen vaihtoehtoon, jota tekoäly ehdottaa, eli Kali on vain sen verran kovennettu, ettei scannaus tuota tulosta OS tunnistuksen osalta tässä vaiheessa.

## d) Demonit

Seuraavaksi asensin ssh:n käyttämällä komentoja:
```
sudo apt-get -y install ssh
sudo systemctl enable ssh
sudo systemctl start ssh
sudo systemctl status ssh
```
![image](https://github.com/user-attachments/assets/edf66bd8-0aa0-4384-9b64-b15e69ef2afe)

Tämän jälkeen päätin asentaa apachen, mutta se olikin jo asennettuna joten jäljelle jäi vain sen aktivointi:

```
sudo systemctl enable apache2
sudo systemctl start apache2
sudo systemctl status apache2
```

Tämän jälkeen ajoin nmap scannauksen uudelleen komennolla `nmap -T4 -A localhost` ja sainkin avoimia portteja:

![image](https://github.com/user-attachments/assets/6731ba93-7350-48a0-98d2-faa8be722dbb)

Kuten oletinkin, avoinna oli portit 22 (ssh) sekä 80 (http). Nyt myös selviää tuloksista käyttöjärjestelmä, jota ei aikasemmin ilmennyt tuloksista, kun palveluita ei ollut aktiivisena.

## e) Metasploitable



## Lähteet


* Karvinen, Tero. Tunkeutumistestaus, 2025. https://terokarvinen.com/tunkeutumistestaus
* Herrasmieshakkerit, Tietoturvan niksipirkka. https://www.withsecure.com/fi/whats-new/podcasts/herrasmieshakkerit
* Nmap manuaali
* 
